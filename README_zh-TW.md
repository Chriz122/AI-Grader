# AI Grader - ä½œæ¥­æ‰¹æ”¹å·¥å…·

ç¹é«”ä¸­æ–‡ | [English](README.md)

é€™æ˜¯ä¸€å€‹ä½¿ç”¨ LLM (Large Language Model) è‡ªå‹•æ‰¹æ”¹ Python ç¨‹å¼ä½œæ¥­çš„å·¥å…·ã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ¤– è‡ªå‹•æ‰¹æ”¹å­¸ç”Ÿ Python ä½œæ¥­
- ğŸ“ PDF é¡Œç›®ä¸€éµè½‰ Markdownï¼ˆæ”¯æ´ LaTeX å…¬å¼ï¼‰
- ğŸ“Š ç”¢ç”Ÿå®Œæ•´è©•åˆ†çµæœèˆ‡çµ±è¨ˆ
- ğŸ“ˆ åŒ¯å‡º Excel å¯è®€çš„æˆç¸¾è¡¨
- ğŸ”„ è‡ªå‹•åˆ‡æ› API é‡‘é‘°ä»¥æ‡‰å°é…é¡é™åˆ¶

## å°ˆæ¡ˆçµæ§‹

```
AI-Grader/
â”œâ”€â”€ ai_grader/
â”‚   â”œâ”€â”€ api_key_manager.py        # Gemini API é‡‘é‘°ç®¡ç†
â”‚   â”œâ”€â”€ grader.py                 # ä¸»ç¨‹å¼ï¼ˆå‘¼å« Gemini é€²è¡Œæ‰¹æ”¹ï¼‰
â”‚   â”œâ”€â”€ gui_app.py                # GUI æ‡‰ç”¨ç¨‹å¼ï¼ˆæ‰¹æ”¹ä»‹é¢ï¼‰
â”‚   â”œâ”€â”€ pdf2md.py                 # é¡Œç›® PDF -> Markdown å·¥å…·
â”‚   â”œâ”€â”€ plagiarism_or_not.py      # æŠ„è¥²æª¢æŸ¥å·¥å…·
â”‚   â””â”€â”€ hw2json.py                # å­¸ç”Ÿä½œæ¥­ -> JSON å½™æ•´å·¥å…·
â”œâ”€â”€ data/                         # å­¸ç”ŸåŸå§‹ä½œæ¥­è³‡æ–™å¤¾ã€ä½œæ¥­é¡Œç›®
â”œâ”€â”€ knowledge/                    # é¡Œç›®ã€è©•åˆ†æ¨™æº–ã€è¼¸å‡ºæ ¼å¼
â”‚   â”œâ”€â”€ grading_criteria.md       # è©•åˆ†æ¨™æº–ï¼ˆå¯è‡ªè¨‚ï¼‰
â”‚   â”œâ”€â”€ output_format.md          # LLM å›è¦†çš„ JSON æ¬„ä½æ ¼å¼ï¼ˆå¯è‡ªè¨‚ï¼‰
â”‚   â”œâ”€â”€ questions.md              # é¡Œç›®ï¼ˆå¯ç”± pdf2md ç”¢ç”Ÿï¼‰
â”‚   â””â”€â”€ students_data.json        # å­¸ç”Ÿè³‡æ–™ï¼ˆIDã€å§“åï¼‰
â”œâ”€â”€ RUN/                          # åŸ·è¡Œè¼¸å‡º
â”‚   â”œâ”€â”€ grading_results.json      # æ‰¹æ”¹çµæœï¼ˆJSONï¼‰
â”‚   â”œâ”€â”€ homework_scores.csv       # æˆç¸¾è¡¨ï¼ˆExcel åŒ¯å…¥æ ¼å¼ï¼‰
â”‚   â”œâ”€â”€ hw_all.json               # å­¸ç”Ÿä½œæ¥­å½™æ•´ï¼ˆç”± hw2json ç”¢ç”Ÿï¼‰
â”‚   â””â”€â”€ plagiarism_report.md      # æŠ„è¥²æª¢æŸ¥å ±å‘Šï¼ˆMarkdownï¼‰
â”œâ”€â”€ test/
â”‚    â””â”€â”€ test_create_prompt.py    # é©—è­‰ Prompt å…§å®¹ï¼ˆä¸éœ€ API å‘¼å«ï¼‰
â””â”€â”€ run_app.bat 				  # åŸ·è¡Œ GUI æ‡‰ç”¨ç¨‹å¼çš„è…³æœ¬
```

## å®‰è£èˆ‡è¨­å®š

1) å®‰è£ä¾è³´å¥—ä»¶ï¼ˆWindows PowerShellï¼‰

```powershell
cd c:\Users\USER\Desktop\AI-Grader
pip install -r requirements.txt
```

2) è¨­å®š Gemini API Keyï¼ˆæ”¯æ´å¤šå€‹é‡‘é‘°è¨—ç®¡ï¼‰

æœ¬å°ˆæ¡ˆé™¤äº†æ”¯æ´å–®ä¸€ç’°å¢ƒè®Šæ•¸ `GEMINI_API_KEY` å¤–ï¼Œä¹Ÿæ”¯æ´åœ¨ `.env` ä¸­è¨—ç®¡å¤šå€‹é‡‘é‘°ï¼ˆä¾‹å¦‚ç•¶ä¸€çµ„é‡‘é‘°é”é…é¡ä¸Šé™æ™‚æœƒè‡ªå‹•è¼ªæ›¿ï¼‰ã€‚

ç¨‹å¼æœƒå„ªå…ˆå°‹æ‰¾ç·¨è™Ÿæ ¼å¼çš„é‡‘é‘° `GEMINI_API_KEY_1, GEMINI_API_KEY_2, ...`ï¼Œè‹¥æ‰¾ä¸åˆ°å‰‡å›é€€åˆ°å–®ä¸€ `GEMINI_API_KEY`ã€‚

å»ºè­°åšæ³•ï¼šåœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å°‡ `.env.example` å¦å­˜æˆ–æ”¹åç‚º `.env`ï¼Œä¸¦å¡«å…¥ä½ çš„é‡‘é‘°ï¼š

ç¯„ä¾‹ï¼ˆå¤šé‡‘é‘°ï¼‰ï¼š

```
GEMINI_API_KEY_1 = "your_first_key_here"
GEMINI_API_KEY_2 = "your_second_key_here"
GEMINI_API_KEY_3 = "your_third_key_here"
```

æˆ–åªä½¿ç”¨å–®ä¸€é‡‘é‘°ï¼š

```
GEMINI_API_KEY = "your_key_here"
```

ç¨‹å¼è¡Œç‚ºæ‘˜è¦ï¼š
- ç¨‹å¼å°‡è¼‰å…¥æ‰€æœ‰ `GEMINI_API_KEY_<n>`ï¼ˆå¾ 1 é–‹å§‹éå¢ï¼‰ä¸¦è¨˜éŒ„è¼‰å…¥æ•¸é‡ï¼›è‹¥æ²’æœ‰ç™¼ç¾ç·¨è™Ÿé‡‘é‘°ï¼Œæœƒå˜—è©¦è®€å– `GEMINI_API_KEY`ã€‚
- ç•¶å‘¼å« API æ™‚è‹¥é‡åˆ° 429 / RESOURCE_EXHAUSTEDï¼ˆé…é¡è€—ç›¡ï¼‰éŒ¯èª¤ï¼Œ`ai_grader` æœƒè‡ªå‹•åˆ‡æ›åˆ°ä¸‹ä¸€çµ„å·²è¨»å†Šçš„é‡‘é‘°ä¸¦é‡è©¦ã€‚
- è‹¥æ‰€æœ‰å·²è¨»å†Šé‡‘é‘°éƒ½å˜—è©¦éä¸”é…é¡çš†ç”¨ç›¡ï¼Œå°‡æœƒå›å ±å¤±æ•—ä¸¦åœæ­¢é‡è©¦ã€‚

> [!NOTE]
> - é‡‘é‘°çš„è¼‰å…¥é †åºä¾ç’°å¢ƒè®Šæ•¸ç·¨è™Ÿï¼ˆ1,2,3...ï¼‰æ±ºå®šï¼Œè«‹ä¾ä½¿ç”¨å„ªå…ˆé †åºå¡«å¯«ã€‚
> - è‹¥åƒ…æä¾› `GEMINI_API_KEY`ï¼Œç³»çµ±ä»å¯æ­£å¸¸é‹ä½œï¼Œä½†ä¸å…·å‚™è‡ªå‹•è¼ªæ›¿åŠŸèƒ½ï¼ˆé™¤éæ‰‹å‹•æ–°å¢å¤šå€‹ `GEMINI_API_KEY_<n>`ï¼‰ã€‚
> - é‡‘é‘°èˆ‡é…é¡ç®¡ç†è«‹ä¾ä¾›æ‡‰å•†æ”¿ç­–èˆ‡å¸³è™Ÿé™åˆ¶æ“ä½œã€‚
> - ç”³è«‹é‡‘é‘°ï¼šhttps://aistudio.google.com/api-keys

3) é¸æ“‡ Gemini æ¨¡å‹

| Model | Category | RPM | TPM | RPD |
|-------|----------|-----|-----|-----|
| gemini-2.5-pro | Text-out models | 0 / 2 | 0 / 125K | 0 / 50 |
| gemini-2.0-flash-lite | Text-out models | 0 / 30 | 0 / 1M | 0 / 200 |
| gemini-2.0-flash | Text-out models | 0 / 15 | 0 / 1M | 0 / 200 |
| gemini-2.5-flash-lite | Text-out models | 0 / 15 | 0 / 250K | 0 / 1K |
| gemini-2.5-flash-tts | Multi-modal generative models | 0 / 3 | 0 / 10K | 0 / 15 |
| gemini-2.5-flash | Text-out models | 0 / 10 | 0 / 250K | 0 / 250 |
| gemini-3-pro | Text-out models | N/A | 0 / 125K | N/A |
| gemini-2.0-flash-exp | Text-out models | N/A | N/A | 0 / 50 |

## å¿«é€Ÿå•Ÿå‹•

å°ˆæ¡ˆæ ¹ç›®éŒ„æä¾›äº† `run_app.bat` æ‰¹æ¬¡æª”æ¡ˆï¼ŒWindows ä½¿ç”¨è€…å¯å¿«é€Ÿå•Ÿå‹• GUI æ‰¹æ”¹ä»‹é¢ï¼š

**æ–¹æ³•ä¸€ï¼šç›´æ¥åŸ·è¡Œ**
- é›™æ“Šå°ˆæ¡ˆæ ¹ç›®éŒ„çš„ `run_app.bat` æª”æ¡ˆå³å¯å•Ÿå‹• GUI æ‰¹æ”¹ä»‹é¢ã€‚

**æ–¹æ³•äºŒï¼šå‘½ä»¤åˆ—åŸ·è¡Œ**
```powershell
cd c:\Users\USER\Desktop\AI-Grader
.\run_app.bat
```

æ­¤æ‰¹æ¬¡æª”æœƒè‡ªå‹•ï¼š
- å•Ÿç”¨ Python è™›æ“¬ç’°å¢ƒ
- åŸ·è¡Œ GUI æ‡‰ç”¨ç¨‹å¼ï¼ˆ`gui_app.py`ï¼‰

## GUI ä»‹é¢ç¸½è¦½

AI Grader GUI æä¾›å‹å–„çš„åœ–å½¢åŒ–ä»‹é¢ï¼ŒåŒ…å«å¤šå€‹åŠŸèƒ½åˆ†é ï¼š

### 1. ä½œæ¥­è½‰ JSON (hw2json)

![HW to JSON ä»‹é¢](assets/hw2json.png)

å°‡å­¸ç”Ÿä½œæ¥­è½‰æ›ç‚º JSON æ ¼å¼ï¼š
- è¨­å®šä¸åŒé¡å‹ä½œæ¥­çš„ç­ç´šè·¯å¾‘
- æŒ‡å®šå­¸ç”Ÿåå–®èˆ‡è¼¸å‡ºè·¯å¾‘
- ä¸€éµè½‰æ›æ‰€æœ‰ä½œæ¥­

### 2. PDF è½‰ Markdown (pdf2md)

![PDF to MD ä»‹é¢](assets/pdf2md.png)

å°‡ PDF é¡Œç›®æª”è½‰æ›ç‚º Markdown æ ¼å¼ï¼š
- é¸æ“‡åŒ…å«ä½œæ¥­é¡Œç›®çš„ PDF æª”æ¡ˆ
- é¸æ“‡ç”Ÿæˆçš„ Markdown è¼¸å‡ºç›®éŒ„
- æ”¯æ´ LaTeX æ•¸å­¸å…¬å¼è½‰æ›
- é¸æ“‡ç”¨æ–¼è½‰æ›çš„ Gemini æ¨¡å‹

### 3. æ‰¹æ”¹ä½œæ¥­ (Grading)

![æ‰¹æ”¹ä»‹é¢](assets/grader.png)

è‡ªå‹•æ‰¹æ”¹ä½œæ¥­ä»‹é¢ï¼š
- è¨­å®šè©•åˆ†æ¨™æº–ã€è¼¸å‡ºæ ¼å¼èˆ‡é¡Œç›®æª”æ¡ˆ
- è¼‰å…¥ä½œæ¥­è³‡æ–™ï¼ˆJSONï¼‰èˆ‡å­¸ç”Ÿåå–®
- è¨­å®šæ‰¹æ”¹çµæœè¼¸å‡ºç›®éŒ„
- é¸æ“‡ç”¨æ–¼æ‰¹æ”¹çš„ Gemini æ¨¡å‹
- å³æ™‚æŸ¥çœ‹åŸ·è¡Œè¨Šæ¯
- ç”¢ç”Ÿå®Œæ•´æ‰¹æ”¹å ±å‘Š

### 4. æŠ„è¥²æª¢æ¸¬ (Plagiarism Detection)

![æŠ„è¥²æª¢æ¸¬ä»‹é¢](assets/plagiarism.png)

æª¢æ¸¬å­¸ç”Ÿä½œæ¥­ä¹‹é–“çš„æ½›åœ¨æŠ„è¥²ï¼š
- è¨­å®šä½œæ¥­è³‡æ–™èˆ‡å­¸ç”Ÿåå–®
- æŒ‡å®šè¦æ¯”å°çš„ç­ç´šï¼ˆé€—è™Ÿåˆ†éš”ï¼‰
- èª¿æ•´ç›¸ä¼¼åº¦é–¾å€¼ï¼ˆ0~1ï¼‰
- ç”¢ç”Ÿè©³ç´°çš„æŠ„è¥²æª¢æ¸¬å ±å‘Š

### 5. ç³»çµ±è¨­å®š (Settings)

![è¨­å®šä»‹é¢](assets/settings.png)

ç®¡ç†ç³»çµ±è¨­å®šï¼š
- **èªè¨€è¨­å®š**ï¼šåˆ‡æ›è‹±æ–‡èˆ‡ç¹é«”ä¸­æ–‡ä»‹é¢
- **Gemini API é‡‘é‘°**ï¼šæ–°å¢ã€ç®¡ç†èˆ‡å„²å­˜å¤šçµ„ API é‡‘é‘°ï¼Œæ”¯æ´è‡ªå‹•è¼ªæ›¿
- **é è¨­æ¨¡å‹**ï¼šé¸æ“‡æ‰€æœ‰æ“ä½œçš„é è¨­ Gemini æ¨¡å‹
- **é è¨­è·¯å¾‘**ï¼šè¨­å®šè¼¸å‡ºç›®éŒ„ã€è©•åˆ†æ¨™æº–ã€è¼¸å‡ºæ ¼å¼ã€é¡Œç›®èˆ‡å­¸ç”Ÿåå–®çš„é è¨­è·¯å¾‘

## è‡ªè¨‚èˆ‡èª¿æ•´

> [!TIP]
> å¯ä½¿ç”¨ [OpenAI å®˜æ–¹ Prompt ä¿®é£¾å™¨](https://platform.openai.com/chat/edit?models=gpt-5&optimize=true) å¿«é€Ÿæ½¤é£¾ `knowledge/grading_criteria.md` èˆ‡ `knowledge/output_format.md`ã€‚
- ä¿®æ”¹ `knowledge/grading_criteria.md` å¯å¾®èª¿è©•åˆ†ç´°ç¯€èˆ‡é…åˆ†ã€‚
- ä¿®æ”¹ `knowledge/output_format.md` å¯å®šç¾© LLM å›å‚³çš„ JSON æ¬„ä½ã€‚
- `ai_grader/grader.py` ã€`ai_grader/plagiarism_or_not.py` çš„ `MODEL_NAME` å¯èª¿æ•´ç‚ºå…¶ä»– Gemini æ¨¡å‹ï¼ˆé è¨­ `gemini-2.5-flash`ï¼‰ã€‚
- `knowledge/students_data.json` å­¸ç”Ÿåå–®å¯ä¾èª²ç¨‹æƒ…å¢ƒèª¿æ•´ã€‚

## æ¸¬è©¦ï¼ˆä¸éœ€é‡‘é‘°ï¼‰

`test/test_create_prompt.py` æœƒä»¥ç¾æœ‰è³‡æ–™ç”¢å‡ºä¸€ä»½å®Œæ•´çš„ LLM æç¤ºå…§å®¹åˆ° `test/test_output.md`ï¼Œä¸æœƒé€£ç¶²ï¼š

```powershell
python test\test_create_prompt.py
```

## ç–‘é›£æ’è§£

- åŸ·è¡Œ `grader.py` æ™‚æç¤ºæœªè¨­å®šé‡‘é‘°ï¼šè«‹ç¢ºèªå°ˆæ¡ˆæ ¹ç›®éŒ„ `.env` å·²å¡«å…¥ `GEMINI_API_KEY`ã€‚
- é€£ç·šéŒ¯èª¤ï¼šè«‹ç¢ºèªç¶²è·¯å¯ç”¨ï¼ŒGemini API éœ€è¦å°å¤–é€£ç·šã€‚
- æ‰¾ä¸åˆ°å­¸ç”Ÿè³‡æ–™ï¼šè«‹ç¢ºèª `knowledge/students_data.json` æ˜¯å¦å­˜åœ¨ã€‚
- æ‰¾ä¸åˆ°ä½œæ¥­ JSONï¼šè«‹å…ˆåŸ·è¡Œ `hw2json.py` ç”¢ç”Ÿ `RUN/hw_all.json`ã€‚
- æ‰¾ä¸åˆ°é¡Œç›® Markdownï¼šè«‹å…ˆåŸ·è¡Œ `pdf2md.py` ç”¢ç”Ÿ `knowledge/questions.md`ã€‚

## æ³¨æ„äº‹é …

- æ‰¹æ”¹æ™‚é–“ä¾å­¸ç”Ÿæ•¸é‡èˆ‡æ¨¡å‹å»¶é²è€Œå®šï¼Œå»ºè­°å…ˆä»¥å°‘é‡è³‡æ–™è©¦è·‘ã€‚
- LLM æœƒç”¢ç”Ÿæˆæœ¬ï¼ˆè‹¥ä½¿ç”¨è¨ˆè²»æ–¹æ¡ˆï¼‰ï¼Œè«‹è‡ªè¡Œè©•ä¼°ç”¨é‡èˆ‡é‡‘é¡ã€‚

## æˆæ¬Šèˆ‡è²¢ç»

æ­¡è¿æäº¤ Issue æˆ– PR æ”¹å–„èªªæ˜èˆ‡æµç¨‹ã€‚